(this["webpackJsonpdesign-explorer"]=this["webpackJsonpdesign-explorer"]||[]).push([[0],[,,,,function(e,t,n){e.exports=n(12)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),i=n(3),a=n.n(i),c=n(1);var u=function(e){var t,n=!1,o=!1,r=1,i=0,a={x:0,y:0},c={x:0,y:0},u={x:0,y:0},s=[],l=[],f=2,d=0,m=0,h=null,g=function(){},v=0,w=Date.now(),x=w,y=!1,E={x:0,y:0};function p(e,t,n){for(var o=0,i=0,a=0,c=0,u=0;u<t.length;u++){b(c,a,t[u].width,t[u].height)&&(n||r<.5?e.drawImage(l[u],c,a,t[u].width,t[u].height):e.drawImage(t[u],c,a)),t[u].height>0&&(i=t[u].height),c+=t[u].width+0,o<f-1?o++:(a+=i+0,i++,c=0,o=0,i=0)}}function b(e,n,o,i){var c=t.width/r,u=t.height/r;return e<a.x+c&&e+o>a.x&&n<a.y+u&&n+i>a.y}function O(e){return{x:e.x/r+a.x,y:e.y/r+a.y}}return function(e){return h=(t=e).getContext("2d"),{initialize:function(e,t,n){f=t,n&&(r=n),l=e.map((function(e){return function(e,t){var n=document.createElement("canvas");return n.width=e.width*t,n.height=e.height*t,n.getContext("2d").drawImage(e,0,0,n.width,n.height),n}(e,.5)})),s=e,function(e){for(var t=0,n=0,o=0,r=0,i=0,a=0;a<e.length;a++){var c=e[a].width,u=e[a].height;u>i&&(i=u),r+=c+0,o<f-1?o++:(r>t&&(t=r),n+=i+0,r=0,i=0,o=0)}o<f-1&&(n+=i+0);d=t,m=n}(e),o=!0},isInitialized:function(){return o},update:function(e,o,l){w=Date.now(),v=.1*(w-x),x=w,function(e,t,o){var s=O(e);if(r+=i=.2*(t-r),0!=i.toFixed(3)){n=!0;var l=O(e),f={x:s.x-l.x,y:s.y-l.y};a.x+=f.x,a.y+=f.y,u.x+=f.x,u.y+=f.y}else n&&g(r),n=!1;if(o){var d=O(e);y||(y=!0,{x:d.x-a.x,y:d.y-a.y},E=d);var m={x:d.x-E.x,y:d.y-E.y};u.x=a.x-m.x,u.y=a.y-m.y}else y=!1;c.x=.2*(u.x-a.x),c.y=.2*(u.y-a.y),a.x+=c.x*v,a.y+=c.y*v}(e,o,l),function(e,t,o,i,u){t.clearRect(0,0,e.width,e.height),t.save(),t.scale(r,r),t.translate(-a.x,-a.y),n||function(){return 0!=c.x.toFixed(2)||0!=c.y.toFixed(2)}()?p(t,o,!0):p(t,o,!1);t.restore(),!1}(t,h,s)},zoomTo:function(e){console.log("zooming to target: "+e)},pointCameraTo:function(e){u.x=e.x,u.y=e.y},getCurrentCameraPos:function(){return{x:a.x,y:a.y}},getDocumentWidth:function(){return d},getDocumentHeight:function(){return m},pointCameraToImage:function(e){var n=e instanceof HTMLImageElement?s.indexOf(e):e;if(s[n]){for(var o=-t.width/r/2,i=0,a=0;a<n;a++)i+=s[a].height+0;u.x=o,u.y=i}else console.warn("Can't find img index "+e)},onPanEnd:function(e){e},onZoomEnd:function(e){g=e},worldToScreenPos:function(e){return function(e){return{x:(e.x-a.x)*r,y:(e.y-a.y)*r}}(e)},screenToWorldPos:function(e){return O(e)}}}(e)};n(9);function s(e,t,n){return e<t?t:e>n?n:e}var l=function(e){var t=e.width,n=e.height,i=Object(o.useState)(!1),a=Object(c.a)(i,2),l=a[0],f=a[1],d=Object(o.useRef)(1),m=Object(o.useRef)(!1),h=Object(o.useRef)({x:0,y:0}),g=Object(o.useState)({x:0,y:0}),v=Object(c.a)(g,2),w=v[0],x=v[1],y=Object(o.useRef)(null),E=Object(o.useState)(0),p=Object(c.a)(E,2),b=(p[0],p[1],Object(o.useRef)(null));function O(){var e=y.current.getBoundingClientRect();x({x:window.scrollX+e.left,y:window.scrollY+e.top})}return Object(o.useEffect)((function(){function e(e){e.preventDefault()}function t(e){e.preventDefault()}return y.current.addEventListener("touchstart",e),y.current.addEventListener("touchend",t),function(){y.current.removeEventListener("touchstart",e),y.current.removeEventListener("touchend",t)}}),[]),Object(o.useEffect)((function(){return window.addEventListener("load",O),window.addEventListener("resize",O),function(){window.removeEventListener("resize",O),window.removeEventListener("load",O)}}),[]),Object(o.useEffect)((function(){var t=u(y.current),n=0,o=e.sections.map((function(r){var i=new Image,a=r.src;return i.src=a,i.addEventListener("load",(function(){console.log("Viewport loaded image: "+a),n++,e.onProgress&&e.onProgress(Math.floor(n/o.length*100)),n===o.length&&(!0,console.log("All images loaded, initialize ViewportRenderer"),t.initialize(o,e.cols,d.current))})),i}));!function e(n){t.isInitialized()&&t.update(h.current,d.current,m.current),requestAnimationFrame(e)}(),b.current=t}),[]),Object(o.useEffect)((function(){var t=e.sections.findIndex((function(t){return t.title===e.targetSection}));console.log("going to target section: "+e.targetSection),b.current.pointCameraToImage(t)}),[e.targetSection]),Object(o.useEffect)((function(){if(l){var t=function(t){(e.scrollToPan||t.ctrlKey||t.metaKey)&&t.preventDefault()};return window.addEventListener("wheel",t,{passive:!1}),function(){window.removeEventListener("wheel",t)}}}),[l]),Object(o.useEffect)((function(){if(e.targetZoom&&(d.current=e.targetZoom,!l)){var o=b.current.screenToWorldPos({x:t/2,y:n/2});h.current=b.current.worldToScreenPos({x:s(o.x,t/2,b.current.getDocumentWidth()),y:s(o.y,n/2,b.current.getDocumentHeight())})}}),[e.targetZoom]),r.a.createElement("canvas",{style:{touchAction:"none"},onMouseDown:function(e){e.stopPropagation(),e.preventDefault(),m.current=!0},onMouseUp:function(e){m.current=!1},onMouseMove:function(e){h.current={x:e.nativeEvent.pageX-w.x,y:e.nativeEvent.pageY-w.y}},onMouseOver:function(e){f(!0)},onMouseOut:function(e){f(!1)},onWheel:function(t){if(t.nativeEvent.ctrlKey||t.nativeEvent.metaKey){var n=d.current-.005*t.nativeEvent.deltaY;d.current=s(n,.2,1.5),e.onZoom&&e.onZoom(d.current)}else if(e.scrollToPan){var o=b.current.getCurrentCameraPos();b.current.pointCameraTo({x:o.x+5*t.nativeEvent.deltaX/d.current,y:o.y+5*t.nativeEvent.deltaY/d.current})}return!1},ref:y,width:t,height:n})};n(10),n(11);var f=function(e){var t=e.defaultZoomLevel?e.defaultZoomLevel:100,n=Math.floor(e.zoomLevel);return r.a.createElement("div",{className:n===t?"zoom-control":"zoom-control zoom-control--mutated"},r.a.createElement("button",{className:"zoom-control__reset",onClick:function(){e.onZoomChange&&e.onZoomChange(t)}},"Reset Zoom"),r.a.createElement("button",{onClick:function(){var t=n-n%25+25;e.onZoomChange&&e.onZoomChange(t>150?150:t)}},"+"),r.a.createElement("div",{className:"zoom-control__value"},n,"%"),r.a.createElement("button",{onClick:function(){var t=n-n%25-25;e.onZoomChange&&e.onZoomChange(t<20?20:t)}},"-"))};var d=function(e){var t=e.src,n=e.initialZoom||100,i=Object(o.useState)(e.initialZoom||100),a=Object(c.a)(i,2),u=a[0],s=a[1],d=Object(o.useState)({width:window.innerWidth,height:window.innerHeight}),m=Object(c.a)(d,2),h=m[0],g=m[1],v=Object(o.useState)(""),w=Object(c.a)(v,2),x=w[0],y=w[1],E=Object(o.useState)(!1),p=Object(c.a)(E,2),b=p[0],O=p[1],j=Object(o.useRef)(null),C=Object(o.useRef)(!1),L=Object(o.useState)(0),z=Object(c.a)(L,2),Z=z[0],S=z[1],T=Object(o.useState)("Getting ready..."),P=Object(c.a)(T,2),R=P[0],M=P[1],I=["Getting ready...","Cleaning up mockup...","Finalising...","Very very final.jpg"],D=Object(o.useRef)(null),k=["Viewing your tasks","Contacting a client","Contacting a helper","Leaderboard","Check in - Before","Check in - During and after","Leaving Reviews"],N=t.map((function(e,t){return{title:k[t],src:e}}));function W(e){!C.current||e.ctrlkey&&e.metaKey?O(!1):(O(!0),null!=j.current&&clearTimeout(j.current),j.current=setTimeout((function(){return O(!1)}),500))}function A(){g({width:D.current.offsetWidth,height:D.current.offsetHeight})}function H(){y(decodeURIComponent(window.location.hash.split("#")[1]))}return Object(o.useEffect)((function(){return window.addEventListener("resize",A),window.addEventListener("hashchange",H),window.addEventListener("scroll",W),function(){window.removeEventListener("resize",A),window.removeEventListener("hashchange",H),window.removeEventListener("scroll",W)}}),[]),Object(o.useEffect)((function(){g({width:D.current.offsetWidth,height:D.current.offsetHeight})}),[D]),r.a.createElement("div",{ref:D,className:"design-explorer-container",onMouseEnter:function(){C.current=!0},onMouseOut:function(){C.current=!1}},r.a.createElement("div",{className:"credit-text"},"Crafted with ReactJS by Alvin Leung"),r.a.createElement(f,{zoomLevel:u,onZoomChange:function(e){s(e)},defaultZoomLevel:n}),r.a.createElement("div",{className:"viewport-container"},r.a.createElement(l,{width:h.width,height:h.height,src:t,sections:N,targetSection:x,targetZoom:u/100,onZoom:function(e){s(100*e)},cols:e.cols?e.cols:1,scrollToPan:!!e.scrollToPan&&e.scrollToPan,onProgress:function(e){!function(){var e=Math.round(Math.random()*(I.length-1));M(I[e])}(),S(e)}})),r.a.createElement("div",{className:b&&100===Z?"zoom-interaction-hint":"zoom-interaction-hint zoom-interaction-hint--hidden"},navigator.platform.indexOf("Win")>-1&&r.a.createElement("span",null,"Hold Ctrl and scroll to zoom in"),navigator.platform.indexOf("Mac")>-1&&r.a.createElement("span",null,"Hold \u2318 and scroll to zoom in")),r.a.createElement("div",{className:100===Z?"progress-indicator progress-indicator--hidden":"progress-indicator"},r.a.createElement("div",{className:"spinner"}),r.a.createElement("div",null," ",R)))};document.querySelectorAll(".design-explorer").forEach((function(e){for(var t=e.querySelectorAll("img"),n=[],o=0;o<t.length;o++)n[o]=t[o].src;var i=parseInt(e.getAttribute("data-cols")||1),c=parseInt(e.getAttribute("data-init-zoom")||100);a.a.render(r.a.createElement(d,{src:n,cols:i,scrollToPan:!1,initialZoom:c}),e)}))}],[[4,1,2]]]);
//# sourceMappingURL=main.56a729c4.chunk.js.map