(this["webpackJsonpdesign-explorer"]=this["webpackJsonpdesign-explorer"]||[]).push([[0],[,,,,function(e,t,n){e.exports=n(12)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),i=n(3),a=n.n(i),c=n(1);var u=function(e){var t,n=!1,o=!1,r=1,i=0,a={x:0,y:0},c={x:0,y:0},u={x:0,y:0},l=[],s=[],f=2,d=0,m=0,h=null,v=function(){},g=0,x=Date.now(),w=x,y=!1,E={x:0,y:0};function p(e,t,n){for(var o=0,i=0,a=0,c=0,u=0;u<t.length;u++){b(c,a,t[u].width,t[u].height)&&(n||r<.5?e.drawImage(s[u],c,a,t[u].width,t[u].height):e.drawImage(t[u],c,a)),t[u].height>0&&(i=t[u].height),c+=t[u].width+0,o<f-1?o++:(a+=i+0,i++,c=0,o=0,i=0)}}function b(e,n,o,i){var c=t.width/r,u=t.height/r;return e<a.x+c&&e+o>a.x&&n<a.y+u&&n+i>a.y}function O(e){return{x:e.x/r+a.x,y:e.y/r+a.y}}return function(e){return h=(t=e).getContext("2d"),{initialize:function(e,t,n){f=t,n&&(r=n),s=e.map((function(e){return function(e,t){var n=document.createElement("canvas");return n.width=e.width*t,n.height=e.height*t,n.getContext("2d").drawImage(e,0,0,n.width,n.height),n}(e,.5)})),l=e,function(e){for(var t=0,n=0,o=0,r=0,i=0,a=0;a<e.length;a++){var c=e[a].width,u=e[a].height;u>i&&(i=u),r+=c+0,o<f-1?o++:(r>t&&(t=r),n+=i+0,r=0,i=0,o=0)}o<f-1&&(n+=i+0);d=t,m=n,console.log(m)}(e),o=!0},isInitialized:function(){return o},update:function(e,o,s){x=Date.now(),g=.1*(x-w),w=x,function(e,t,o){var l=O(e);if(r+=i=.2*(t-r),0!=i.toFixed(3)){n=!0;var s=O(e),f={x:l.x-s.x,y:l.y-s.y};a.x+=f.x,a.y+=f.y,u.x+=f.x,u.y+=f.y}else n&&v(r),n=!1;if(o){var d=O(e);y||(y=!0,{x:d.x-a.x,y:d.y-a.y},E=d);var m={x:d.x-E.x,y:d.y-E.y};u.x=a.x-m.x,u.y=a.y-m.y}else y=!1;c.x=.2*(u.x-a.x),c.y=.2*(u.y-a.y),a.x+=c.x*g,a.y+=c.y*g}(e,o,s),function(e,t,o,i,u){t.clearRect(0,0,e.width,e.height),t.save(),t.scale(r,r),t.translate(-a.x,-a.y),n||function(){return 0!=c.x.toFixed(2)||0!=c.y.toFixed(2)}()?p(t,o,!0):p(t,o,!1);t.restore(),!1}(t,h,l)},zoomTo:function(e){console.log("zooming to target: "+e)},pointCameraTo:function(e){u.x=e.x,u.y=e.y},getCurrentCameraPos:function(){return{x:a.x,y:a.y}},getDocumentWidth:function(){return d},getDocumentHeight:function(){return m},pointCameraToImage:function(e){var n=e instanceof HTMLImageElement?l.indexOf(e):e;if(l[n]){for(var o=-t.width/r/2,i=0,a=0;a<n;a++)i+=l[a].height+0;u.x=o,u.y=i}else console.warn("Can't find img index "+e)},onPanEnd:function(e){e},onZoomEnd:function(e){v=e},worldToScreenPos:function(e){return function(e){return{x:(e.x-a.x)*r,y:(e.y-a.y)*r}}(e)},screenToWorldPos:function(e){return O(e)}}}(e)};n(9);function l(e,t,n){return e<t?t:e>n?n:e}var s=function(e){var t=e.width,n=e.height,i=Object(o.useState)(!1),a=Object(c.a)(i,2),s=a[0],f=a[1],d=Object(o.useRef)(1),m=Object(o.useRef)(!1),h=Object(o.useRef)({x:0,y:0}),v=Object(o.useState)({x:0,y:0}),g=Object(c.a)(v,2),x=g[0],w=g[1],y=Object(o.useRef)(null),E=Object(o.useRef)(null);return Object(o.useEffect)((function(){function e(e){e.preventDefault()}function t(e){e.preventDefault()}return y.current.addEventListener("touchstart",e),y.current.addEventListener("touchend",t),function(){y.current.removeEventListener("touchstart",e),y.current.removeEventListener("touchend",t)}}),[]),Object(o.useEffect)((function(){var e=y.current.getBoundingClientRect();w({x:e.left,y:e.top})}),[]),Object(o.useEffect)((function(){var t=u(y.current),n=0,o=e.sections.map((function(r){var i=new Image,a=r.src;return i.src=a,i.addEventListener("load",(function(){console.log("Viewport loaded image: "+a),++n===o.length&&(!0,console.log("All images loaded, initialize ViewportRenderer"),t.initialize(o,e.cols,d.current))})),i}));!function e(n){t.isInitialized()&&t.update(h.current,d.current,m.current),requestAnimationFrame(e)}(),E.current=t}),[]),Object(o.useEffect)((function(){var t=e.sections.findIndex((function(t){return t.title===e.targetSection}));console.log("going to target section: "+e.targetSection),E.current.pointCameraToImage(t)}),[e.targetSection]),Object(o.useEffect)((function(){if(s){var t=function(t){(e.scrollToPan||t.ctrlKey||t.metaKey)&&t.preventDefault()};return window.addEventListener("wheel",t,{passive:!1}),function(){window.removeEventListener("wheel",t)}}}),[s]),Object(o.useEffect)((function(){if(e.targetZoom&&(d.current=e.targetZoom,!s)){var o=E.current.screenToWorldPos({x:t/2,y:n/2});h.current=E.current.worldToScreenPos({x:l(o.x,t/2,E.current.getDocumentWidth()),y:l(o.y,n/2,E.current.getDocumentHeight())})}}),[e.targetZoom]),r.a.createElement("canvas",{style:{touchAction:"none"},onMouseDown:function(e){e.stopPropagation(),e.preventDefault(),m.current=!0},onMouseUp:function(e){m.current=!1},onMouseMove:function(e){m&&(h.current={x:e.nativeEvent.pageX-x.x,y:e.nativeEvent.pageY-x.y})},onMouseOver:function(e){f(!0)},onMouseOut:function(e){f(!1)},onWheel:function(t){if(t.nativeEvent.ctrlKey||t.nativeEvent.metaKey){var n=d.current-.005*t.nativeEvent.deltaY;d.current=l(n,.2,1.5),e.onZoom&&e.onZoom(d.current)}else if(e.scrollToPan){var o=E.current.getCurrentCameraPos();E.current.pointCameraTo({x:o.x+5*t.nativeEvent.deltaX/d.current,y:o.y+5*t.nativeEvent.deltaY/d.current})}return!1},ref:y,width:t,height:n})};n(10),n(11);var f=function(e){var t=e.defaultZoomLevel?e.defaultZoomLevel:100,n=Math.floor(e.zoomLevel);return r.a.createElement("div",{className:n===t?"zoom-control":"zoom-control zoom-control--mutated"},r.a.createElement("button",{className:"zoom-control__reset",onClick:function(){e.onZoomChange&&e.onZoomChange(t)}},"Reset Zoom"),r.a.createElement("button",{onClick:function(){var t=n-n%25+25;e.onZoomChange&&e.onZoomChange(t>150?150:t)}},"+"),r.a.createElement("div",{className:"zoom-control__value"},n,"%"),r.a.createElement("button",{onClick:function(){var t=n-n%25-25;e.onZoomChange&&e.onZoomChange(t<20?20:t)}},"-"))};var d=function(e){var t=e.src,n=e.initialZoom||100,i=Object(o.useState)(e.initialZoom||100),a=Object(c.a)(i,2),u=a[0],l=a[1],d=Object(o.useState)({width:window.innerWidth,height:window.innerHeight}),m=Object(c.a)(d,2),h=m[0],v=m[1],g=Object(o.useState)(""),x=Object(c.a)(g,2),w=x[0],y=x[1],E=Object(o.useState)(!1),p=Object(c.a)(E,2),b=p[0],O=p[1],C=Object(o.useRef)(null),j=Object(o.useRef)(null),L=["Viewing your tasks","Contacting a client","Contacting a helper","Leaderboard","Check in - Before","Check in - During and after","Leaving Reviews"],z=t.map((function(e,t){return{title:L[t],src:e}}));function Z(e){e.ctrlkey&&e.metaKey?O(!1):(O(!0),null!=C.current&&clearTimeout(C.current),C.current=setTimeout((function(){return O(!1)}),500))}function T(){v({width:j.current.offsetWidth,height:j.current.offsetHeight})}function S(){y(decodeURIComponent(window.location.hash.split("#")[1]))}return Object(o.useEffect)((function(){return window.addEventListener("resize",T),window.addEventListener("hashchange",S),window.addEventListener("scroll",Z),function(){window.removeEventListener("resize",T),window.removeEventListener("hashchange",S),window.removeEventListener("scroll",Z)}}),[j]),r.a.createElement("div",{ref:j,className:"design-explorer-container"},r.a.createElement("div",{className:"credit-text"},"Crafted with ReactJS by Alvin Leung"),r.a.createElement(f,{zoomLevel:u,onZoomChange:function(e){l(e)},defaultZoomLevel:n}),r.a.createElement("div",{className:"viewport-container"},r.a.createElement(s,{width:h.width,height:h.height,src:t,sections:z,targetSection:w,targetZoom:u/100,onZoom:function(e){l(100*e)},cols:e.cols?e.cols:1,scrollToPan:!!e.scrollToPan&&e.scrollToPan})),r.a.createElement("div",{className:b?"zoom-interaction-hint":"zoom-interaction-hint zoom-interaction-hint--hidden"},navigator.platform.indexOf("Win")>-1&&r.a.createElement("span",null,"Hold Ctrl and scroll to zoom in"),navigator.platform.indexOf("Mac")>-1&&r.a.createElement("span",null,"Hold \u2318 and scroll to zoom in")))};window.addEventListener("load",(function(){document.querySelectorAll(".design-explorer").forEach((function(e){var t=e.getAttribute("data-src").replaceAll("'",'"'),n=JSON.parse(t),o=parseInt(e.getAttribute("data-cols")||1),i=parseInt(e.getAttribute("data-init-zoom")||100);console.log("test"),a.a.render(r.a.createElement(d,{src:n,cols:o,scrollToPan:!1,initialZoom:i}),e)}))}))}],[[4,1,2]]]);
//# sourceMappingURL=main.3f82ff55.chunk.js.map