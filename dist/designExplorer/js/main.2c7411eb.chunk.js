(this["webpackJsonpdesign-explorer"]=this["webpackJsonpdesign-explorer"]||[]).push([[0],[,,,,function(e,t,n){e.exports=n(12)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),i=n(3),a=n.n(i),c=n(1);var u=function(e){var t,n=!1,o=!1,r=1,i=0,a={x:0,y:0},c={x:0,y:0},u={x:0,y:0},l=[],s=[],f=2,d=0,m=0,h=null,g=function(){},v=0,w=Date.now(),x=w,y=!1,E={x:0,y:0};function p(e,t,n){for(var o=0,i=0,a=0,c=0,u=0;u<t.length;u++){O(c,a,t[u].width,t[u].height)&&(n||r<.5?e.drawImage(s[u],c,a,t[u].width,t[u].height):e.drawImage(t[u],c,a)),t[u].height>0&&(i=t[u].height),c+=t[u].width+0,o<f-1?o++:(a+=i+0,i++,c=0,o=0,i=0)}}function O(e,n,o,i){var c=t.width/r,u=t.height/r;return e<a.x+c&&e+o>a.x&&n<a.y+u&&n+i>a.y}function b(e){return{x:e.x/r+a.x,y:e.y/r+a.y}}return function(e){return h=(t=e).getContext("2d"),{initialize:function(e,t,n){f=t,n&&(r=n),s=e.map((function(e){return function(e,t){var n=document.createElement("canvas");return n.width=e.width*t,n.height=e.height*t,n.getContext("2d").drawImage(e,0,0,n.width,n.height),n}(e,.5)})),l=e,function(e){for(var t=0,n=0,o=0,r=0,i=0,a=0;a<e.length;a++){var c=e[a].width,u=e[a].height;u>i&&(i=u),r+=c+0,o<f-1?o++:(r>t&&(t=r),n+=i+0,r=0,i=0,o=0)}o<f-1&&(n+=i+0);d=t,m=n}(e),o=!0},isInitialized:function(){return o},update:function(e,o,s){w=Date.now(),v=.1*(w-x),x=w,function(e,t,o){var l=b(e);if(r+=i=.2*(t-r),0!=i.toFixed(3)){n=!0;var s=b(e),f={x:l.x-s.x,y:l.y-s.y};a.x+=f.x,a.y+=f.y,u.x+=f.x,u.y+=f.y}else n&&g(r),n=!1;if(o){var d=b(e);y||(y=!0,{x:d.x-a.x,y:d.y-a.y},E=d);var m={x:d.x-E.x,y:d.y-E.y};u.x=a.x-m.x,u.y=a.y-m.y}else y=!1;c.x=.2*(u.x-a.x),c.y=.2*(u.y-a.y),a.x+=c.x*v,a.y+=c.y*v}(e,o,s),function(e,t,o,i,u){t.clearRect(0,0,e.width,e.height),t.save(),t.scale(r,r),t.translate(-a.x,-a.y),n||function(){return 0!=c.x.toFixed(2)||0!=c.y.toFixed(2)}()?p(t,o,!0):p(t,o,!1);t.restore(),!1}(t,h,l)},zoomTo:function(e){console.log("zooming to target: "+e)},pointCameraTo:function(e){u.x=e.x,u.y=e.y},getCurrentCameraPos:function(){return{x:a.x,y:a.y}},getDocumentWidth:function(){return d},getDocumentHeight:function(){return m},pointCameraToImage:function(e){var n=e instanceof HTMLImageElement?l.indexOf(e):e;if(l[n]){for(var o=-t.width/r/2,i=0,a=0;a<n;a++)i+=l[a].height+0;u.x=o,u.y=i}else console.warn("Can't find img index "+e)},onPanEnd:function(e){e},onZoomEnd:function(e){g=e},worldToScreenPos:function(e){return function(e){return{x:(e.x-a.x)*r,y:(e.y-a.y)*r}}(e)},screenToWorldPos:function(e){return b(e)}}}(e)};n(9);function l(e,t,n){return e<t?t:e>n?n:e}var s=function(e){var t=e.width,n=e.height,i=Object(o.useState)(!1),a=Object(c.a)(i,2),s=a[0],f=a[1],d=Object(o.useRef)(1),m=Object(o.useRef)(!1),h=Object(o.useRef)({x:0,y:0}),g=Object(o.useState)({x:0,y:0}),v=Object(c.a)(g,2),w=v[0],x=v[1],y=Object(o.useRef)(null),E=Object(o.useRef)(null);function p(){var e=y.current.getBoundingClientRect();x({x:window.scrollX+e.left,y:window.scrollY+e.top})}return Object(o.useEffect)((function(){function e(e){e.preventDefault()}function t(e){e.preventDefault()}return y.current.addEventListener("touchstart",e),y.current.addEventListener("touchend",t),function(){y.current.removeEventListener("touchstart",e),y.current.removeEventListener("touchend",t)}}),[]),Object(o.useEffect)((function(){return window.addEventListener("load",p),window.addEventListener("resize",p),function(){window.removeEventListener("resize",p),window.removeEventListener("load",p)}}),[]),Object(o.useEffect)((function(){var t=u(y.current),n=0,o=e.sections.map((function(r){var i=new Image,a=r.src;return i.src=a,i.addEventListener("load",(function(){console.log("Viewport loaded image: "+a),n++,e.onProgress&&e.onProgress(Math.floor(n/o.length*100)),n===o.length&&(!0,console.log("All images loaded, initialize ViewportRenderer"),t.initialize(o,e.cols,d.current))})),i}));!function e(n){t.isInitialized()&&t.update(h.current,d.current,m.current),requestAnimationFrame(e)}(),E.current=t}),[]),Object(o.useEffect)((function(){var t=e.sections.findIndex((function(t){return t.title===e.targetSection}));console.log("going to target section: "+e.targetSection),E.current.pointCameraToImage(t)}),[e.targetSection]),Object(o.useEffect)((function(){if(s){var t=function(t){(e.scrollToPan||t.ctrlKey||t.metaKey)&&t.preventDefault()};return window.addEventListener("wheel",t,{passive:!1}),function(){window.removeEventListener("wheel",t)}}}),[s]),Object(o.useEffect)((function(){if(e.targetZoom&&(d.current=e.targetZoom,!s)){var o=E.current.screenToWorldPos({x:t/2,y:n/2});h.current=E.current.worldToScreenPos({x:l(o.x,t/2,E.current.getDocumentWidth()),y:l(o.y,n/2,E.current.getDocumentHeight())})}}),[e.targetZoom]),r.a.createElement("canvas",{style:{touchAction:"none"},onMouseDown:function(e){e.stopPropagation(),e.preventDefault(),m.current=!0},onMouseUp:function(e){m.current=!1},onMouseMove:function(t){h.current={x:t.nativeEvent.pageX-w.x,y:t.nativeEvent.pageY-w.y},m.current&&e.onPan&&e.onPan()},onMouseOver:function(e){f(!0)},onMouseOut:function(e){f(!1)},onWheel:function(t){if(t.nativeEvent.ctrlKey||t.nativeEvent.metaKey){var n=d.current-.005*t.nativeEvent.deltaY;d.current=l(n,.2,1.5),e.onZoom&&e.onZoom(d.current)}else if(e.scrollToPan){var o=E.current.getCurrentCameraPos();E.current.pointCameraTo({x:o.x+5*t.nativeEvent.deltaX/d.current,y:o.y+5*t.nativeEvent.deltaY/d.current})}return!1},ref:y,width:t,height:n})};n(10),n(11);var f=function(e){var t=e.defaultZoomLevel?e.defaultZoomLevel:100,n=Math.floor(e.zoomLevel);return r.a.createElement("div",{className:n===t?"zoom-control":"zoom-control zoom-control--mutated"},r.a.createElement("button",{className:"zoom-control__reset",onClick:function(){e.onZoomChange&&e.onZoomChange(t)}},"Reset Zoom"),r.a.createElement("button",{onClick:function(){var t=n-n%25+25;e.onZoomChange&&e.onZoomChange(t>150?150:t)}},"+"),r.a.createElement("div",{className:"zoom-control__value"},n,"%"),r.a.createElement("button",{onClick:function(){var t=n-n%25-25;e.onZoomChange&&e.onZoomChange(t<20?20:t)}},"-"))};var d={SCROLL:"onScroll",MOUSE_OVER:"onMouseOver",NONE:"none"},m=function(e){var t=e.src,n=e.initialZoom||100,i=Object(o.useState)(e.initialZoom||100),a=Object(c.a)(i,2),u=a[0],l=a[1],m=Object(o.useState)({width:window.innerWidth,height:window.innerHeight}),h=Object(c.a)(m,2),g=h[0],v=h[1],w=Object(o.useState)(""),x=Object(c.a)(w,2),y=x[0],E=x[1],p=e.zoomHintDuration||1e3,O=Object(o.useState)(!1),b=Object(c.a)(O,2),j=b[0],C=b[1],z=Object(o.useRef)(null),L=Object(o.useRef)(!1),S=Object(o.useState)(0),Z=Object(c.a)(S,2),P=Z[0],R=Z[1],T=Object(o.useState)("Getting ready..."),M=Object(c.a)(T,2),D=M[0],I=M[1],N=["Getting ready...","Cleaning up mockup...","Finalising...","Very very final.jpg"],H=Object(o.useRef)(null),A=["Viewing your tasks","Contacting a client","Contacting a helper","Leaderboard","Check in - Before","Check in - During and after","Leaving Reviews"],k=t.map((function(e,t){return{title:A[t],src:e}}));function W(){null!=z.current&&clearTimeout(z.current),j&&C(!1)}function V(t){(function(t){switch(e.zoomHint){case d.SCROLL:return t;case d.MOUSE_OVER:return L.current&&t;case d.NONE:return!1}return!1})(!0)&&(t.ctrlkey&&t.metaKey?C(!1):(C(!0),null!=z.current&&clearTimeout(z.current),z.current=setTimeout((function(){return C(!1)}),p)))}function _(){v({width:H.current.offsetWidth,height:H.current.offsetHeight})}function F(){E(decodeURIComponent(window.location.hash.split("#")[1]))}return Object(o.useEffect)((function(){return window.addEventListener("resize",_),window.addEventListener("hashchange",F),window.addEventListener("scroll",V),function(){window.removeEventListener("resize",_),window.removeEventListener("hashchange",F),window.removeEventListener("scroll",V)}}),[]),Object(o.useEffect)((function(){v({width:H.current.offsetWidth,height:H.current.offsetHeight})}),[H]),r.a.createElement("div",{ref:H,className:"design-explorer-container",onMouseEnter:function(){L.current=!0},onMouseOut:function(){L.current=!1}},r.a.createElement("div",{className:"credit-text"},"Crafted with ReactJS by Alvin Leung"),r.a.createElement(f,{zoomLevel:u,onZoomChange:function(e){l(e)},defaultZoomLevel:n}),r.a.createElement("div",{className:"viewport-container"},r.a.createElement(s,{width:g.width,height:g.height,src:t,sections:k,targetSection:y,targetZoom:u/100,onZoom:function(e){l(100*e),W()},cols:e.cols?e.cols:1,scrollToPan:!!e.scrollToPan&&e.scrollToPan,onProgress:function(e){!function(){var e=Math.round(Math.random()*(N.length-1));I(N[e])}(),R(e)},onPan:function(e){W()}})),r.a.createElement("div",{className:j&&100===P?"zoom-interaction-hint":"zoom-interaction-hint zoom-interaction-hint--hidden"},navigator.platform.indexOf("Win")>-1&&r.a.createElement("span",null,"Hold Ctrl and scroll to zoom in"),navigator.platform.indexOf("Mac")>-1&&r.a.createElement("span",null,"Hold \u2318 and scroll to zoom in")),r.a.createElement("div",{className:100===P?"progress-indicator progress-indicator--hidden":"progress-indicator"},r.a.createElement("div",{className:"spinner"}),r.a.createElement("div",null," ",D)))};document.querySelectorAll(".design-explorer").forEach((function(e){for(var t=e.querySelectorAll("img"),n=[],o=0;o<t.length;o++)n[o]=t[o].src;var i=parseInt(e.getAttribute("data-cols")||1),c=parseInt(e.getAttribute("data-init-zoom")||100),u=e.getAttribute("data-zoom-hint")||"none",l=e.getAttribute("data-scroll-to-pan")||!1,s=e.getAttribute("data-zoom-hint-duration")||1e3;a.a.render(r.a.createElement(m,{src:n,cols:i,scrollToPan:l,initialZoom:c,zoomHint:u,zoomHintDuration:s}),e)}))}],[[4,1,2]]]);
//# sourceMappingURL=main.2c7411eb.chunk.js.map